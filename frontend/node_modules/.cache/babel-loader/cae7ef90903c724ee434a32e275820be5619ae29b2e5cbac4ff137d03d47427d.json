{"ast":null,"code":"var _jsxFileName = \"D:\\\\internconnect\\\\internconnect_modified_final (19)\\\\internconnect_modified_final\\\\internconnect_full_project\\\\internconnect\\\\frontend\\\\src\\\\components\\\\EvaluationCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EvaluationCard = ({\n  student,\n  onUpdateResult\n}) => {\n  _s();\n  var _student$supervisor_s, _student$company_scor;\n  const navigate = useNavigate();\n  const [currentResult, setCurrentResult] = useState(student.evaluation_result);\n  const handleDetailClick = () => {\n    navigate(`/student-detail/${student.student_id}`);\n  };\n  const handleResultChange = async e => {\n    const selectedValue = e.target.value;\n    const mapped = selectedValue === 'ผ่าน' ? 1 : selectedValue === 'ไม่ผ่าน' ? 2 : 0;\n    const selectedText = e.target.options[e.target.selectedIndex].text;\n    try {\n      await axios.put(`http://localhost:5000/api/evaluation/${student.evaluation_id}`, {\n        evaluation_result: mapped\n      });\n      setCurrentResult(mapped);\n      if (onUpdateResult) onUpdateResult(student.evaluation_id, mapped);\n      alert(`✅ บันทึกผลการประเมิน \"${selectedText}\" เรียบร้อยแล้ว`);\n    } catch (err) {\n      console.error('❌ อัปเดตผลไม่สำเร็จ:', err);\n      alert('เกิดข้อผิดพลาดในการอัปเดตผลการประเมิน');\n    }\n  };\n  const reverseMap = {\n    1: 'ผ่าน',\n    2: 'ไม่ผ่าน',\n    0: '',\n    null: ''\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl shadow-lg border border-blue-200 p-5 mb-5 flex flex-col md:flex-row md:items-center gap-6 text-black\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-5 items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http://localhost:5000/uploads/${student.profile_image || 'default.jpg'}`,\n        alt: \"profile\",\n        className: \"w-24 h-24 rounded-full object-cover border-4 border-indigo-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-xl\",\n          children: student.student_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDetailClick,\n          className: \"text-blue-600 text-sm underline hover:text-blue-800\",\n          children: \"\\u0E14\\u0E39\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u0E2D\\u0E32\\u0E08\\u0E32\\u0E23\\u0E22\\u0E4C\\u0E19\\u0E34\\u0E40\\u0E17\\u0E28 : \", student.supervisor_name || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E17\\u0E35\\u0E48\\u0E44\\u0E14\\u0E49 : \", (_student$supervisor_s = student.supervisor_score) !== null && _student$supervisor_s !== void 0 ? _student$supervisor_s : '-', \" / 100 \\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2\",\n            children: [\"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E1B\\u0E23\\u0E30\\u0E01\\u0E2D\\u0E1A\\u0E01\\u0E32\\u0E23 : \", student.company_name || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E17\\u0E35\\u0E48\\u0E44\\u0E14\\u0E49 : \", (_student$company_scor = student.company_score) !== null && _student$company_scor !== void 0 ? _student$company_scor : '-', \" / 120 \\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        className: `border border-gray-300 rounded px-4 py-2 text-sm font-medium\n            ${currentResult === 1 ? 'bg-green-500 text-white' : currentResult === 2 ? 'bg-red-500 text-white' : 'bg-white text-black'}`,\n        value: reverseMap[currentResult] || '',\n        onChange: handleResultChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          disabled: true,\n          className: \"text-gray-400\",\n          children: \"\\u0E1C\\u0E25\\u0E01\\u0E32\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u0E1C\\u0E48\\u0E32\\u0E19\",\n          children: \"\\u0E1C\\u0E48\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u0E44\\u0E21\\u0E48\\u0E1C\\u0E48\\u0E32\\u0E19\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E1C\\u0E48\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(EvaluationCard, \"AU5IoSyWfuZNANjfGPpWByLsLMM=\", false, function () {\n  return [useNavigate];\n});\n_c = EvaluationCard;\nexport default EvaluationCard;\nvar _c;\n$RefreshReg$(_c, \"EvaluationCard\");","map":{"version":3,"names":["React","useState","useNavigate","axios","jsxDEV","_jsxDEV","EvaluationCard","student","onUpdateResult","_s","_student$supervisor_s","_student$company_scor","navigate","currentResult","setCurrentResult","evaluation_result","handleDetailClick","student_id","handleResultChange","e","selectedValue","target","value","mapped","selectedText","options","selectedIndex","text","put","evaluation_id","alert","err","console","error","reverseMap","null","className","children","src","profile_image","alt","fileName","_jsxFileName","lineNumber","columnNumber","student_name","onClick","supervisor_name","supervisor_score","company_name","company_score","onChange","disabled","_c","$RefreshReg$"],"sources":["D:/internconnect/internconnect_modified_final (19)/internconnect_modified_final/internconnect_full_project/internconnect/frontend/src/components/EvaluationCard.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst EvaluationCard = ({ student, onUpdateResult }) => {\r\n  const navigate = useNavigate();\r\n  const [currentResult, setCurrentResult] = useState(student.evaluation_result);\r\n\r\n  const handleDetailClick = () => {\r\n    navigate(`/student-detail/${student.student_id}`);\r\n  };\r\n\r\n  const handleResultChange = async (e) => {\r\n    const selectedValue = e.target.value;\r\n    const mapped = selectedValue === 'ผ่าน' ? 1 : selectedValue === 'ไม่ผ่าน' ? 2 : 0;\r\n    const selectedText = e.target.options[e.target.selectedIndex].text;\r\n\r\n    try {\r\n      await axios.put(`http://localhost:5000/api/evaluation/${student.evaluation_id}`, {\r\n        evaluation_result: mapped,\r\n      });\r\n\r\n      setCurrentResult(mapped);\r\n      if (onUpdateResult) onUpdateResult(student.evaluation_id, mapped);\r\n\r\n      alert(`✅ บันทึกผลการประเมิน \"${selectedText}\" เรียบร้อยแล้ว`);\r\n    } catch (err) {\r\n      console.error('❌ อัปเดตผลไม่สำเร็จ:', err);\r\n      alert('เกิดข้อผิดพลาดในการอัปเดตผลการประเมิน');\r\n    }\r\n  };\r\n\r\n  const reverseMap = {\r\n    1: 'ผ่าน',\r\n    2: 'ไม่ผ่าน',\r\n    0: '',\r\n    null: ''\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg border border-blue-200 p-5 mb-5 flex flex-col md:flex-row md:items-center gap-6 text-black\">\r\n      <div className=\"flex gap-5 items-start\">\r\n        <img\r\n          src={`http://localhost:5000/uploads/${student.profile_image || 'default.jpg'}`}\r\n          alt=\"profile\"\r\n          className=\"w-24 h-24 rounded-full object-cover border-4 border-indigo-300\"\r\n        />\r\n        <div>\r\n          <h3 className=\"font-semibold text-xl\">{student.student_name}</h3>\r\n          <button\r\n            onClick={handleDetailClick}\r\n            className=\"text-blue-600 text-sm underline hover:text-blue-800\"\r\n          >\r\n            ดูข้อมูลเพิ่มเติม\r\n          </button>\r\n\r\n          <div className=\"mt-3\">\r\n            <p>อาจารย์นิเทศ : {student.supervisor_name || '-'}</p>\r\n            <p>คะแนนที่ได้ : {student.supervisor_score ?? '-'} / 100 คะแนน</p>\r\n            <p className=\"mt-2\">สถานประกอบการ : {student.company_name || '-'}</p>\r\n            <p>คะแนนที่ได้ : {student.company_score ?? '-'} / 120 คะแนน</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"ml-auto\">\r\n        <select\r\n          className={`border border-gray-300 rounded px-4 py-2 text-sm font-medium\r\n            ${currentResult === 1 ? 'bg-green-500 text-white' : \r\n              currentResult === 2 ? 'bg-red-500 text-white' : \r\n              'bg-white text-black'}`}\r\n          value={reverseMap[currentResult] || ''}\r\n          onChange={handleResultChange}\r\n        >\r\n          <option value=\"\" disabled className=\"text-gray-400\">ผลการประเมิน</option>\r\n          <option value=\"ผ่าน\">ผ่าน</option>\r\n          <option value=\"ไม่ผ่าน\">ไม่ผ่าน</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EvaluationCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}